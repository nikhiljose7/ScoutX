{% extends "base.html" %}

{% block title %}Player Chatbot - Football Analytics{% endblock %}

{% block extra_css %}
<style>
.chat-container {
    height: 500px;
    display: flex;
    flex-direction: column;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
}

.chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    background: #f8f9fa;
}

.chat-message {
    margin-bottom: 1rem;
    padding: 0.75rem;
    border-radius: 8px;
    max-width: 80%;
}

.chat-message.user {
    background: #2c3e50;
    color: white;
    margin-left: auto;
}

.chat-message.bot {
    background: white;
    border: 1px solid #ddd;
}

.chat-input-container {
    display: flex;
    padding: 1rem;
    border-top: 1px solid #ddd;
    gap: 0.5rem;
}

.chat-input {
    flex: 1;
}
</style>
{% endblock %}

{% block content %}
<div class="page-header">
    <h2>Player Information Chatbot</h2>
    <p>Ask questions about player statistics and performance</p>
</div>

<div class="card">
    <div class="card-header">Chat Interface</div>
    <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
            <div class="chat-message bot">
                <p>Hello! I can help you with information about football players. Ask me about player statistics, performance, or comparisons.</p>
            </div>
        </div>
        <div class="chat-input-container">
            <input type="text" id="chatInput" class="form-control chat-input" placeholder="Ask about a player...">
            <button id="sendBtn" class="btn btn-primary">Send</button>
        </div>
    </div>
</div>

<div class="card mt-2">
    <div class="card-header">Example Questions</div>
    <ul>
        <li>What are the statistics for [Player Name]?</li>
        <li>How many goals did [Player Name] score?</li>
        <li>Which league does [Player Name] play in?</li>
        <li>Tell me about [Player Name]'s performance</li>
    </ul>
</div>
{% endblock %}

{% block extra_js %}
<script>
const chatMessages = document.getElementById('chatMessages');
const chatInput = document.getElementById('chatInput');
const sendBtn = document.getElementById('sendBtn');

function addMessage(text, isUser) {
    const messageDiv = document.createElement('div');
    messageDiv.className = `chat-message ${isUser ? 'user' : 'bot'}`;
    messageDiv.innerHTML = `<p>${text}</p>`;
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
}

async function sendMessage() {
    const message = chatInput.value.trim();
    if (!message) return;
    
    addMessage(message, true);
    chatInput.value = '';
    
    // TODO: Implement chatbot API
    setTimeout(() => {
        addMessage('Chatbot feature coming soon. This will use AI to answer your questions about players.', false);
    }, 500);
}

sendBtn.addEventListener('click', sendMessage);
chatInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') {
        sendMessage();
    }
});
</script>
{% endblock %}